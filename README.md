# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞: HestiaCP, Grafana, Prometheus, Loki, Fail2Ban, Firewall

> **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ Ubuntu/Debian.**

----

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç:
- [HestiaCP](https://hestiacp.com/) ‚Äî —É–¥–æ–±–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º
- [Grafana](https://grafana.com/), [Prometheus](https://prometheus.io/), [Node Exporter](https://prometheus.io/docs/guides/node-exporter/), [Pushgateway](https://prometheus.io/docs/practices/pushing/) ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [Loki](https://grafana.com/oss/loki/) –∏ [Promtail](https://grafana.com/docs/loki/latest/clients/promtail/) ‚Äî —Å–±–æ—Ä –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
- [Fail2Ban](https://www.fail2ban.org/) ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ –∏ –±–æ—Ç-–∞—Ç–∞–∫
- Firewall (iptables) ‚Äî –±–∞–∑–æ–≤–∞—è –∑–∞—â–∏—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞

–°–∫—Ä–∏–ø—Ç –ø–æ–¥–æ–π–¥–µ—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –ª—é–±–æ–≥–æ VPS –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

---

## üß© –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ root-–¥–æ—Å—Ç—É–ø–∞**
2. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π Grafana (–µ—Å–ª–∏ –±—ã–ª–∏)**
3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤**
4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ HestiaCP**
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è iptables firewall**
6. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Fail2Ban**
7. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Grafana**
8. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Prometheus, Node Exporter, Pushgateway**
9. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Loki –∏ Promtail**
10. **–≠–∫—Å–ø–æ—Ä—Ç–µ—Ä –º–µ—Ç—Ä–∏–∫ Fail2Ban –¥–ª—è Prometheus**
11. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∏–º–ø–æ—Ä—Ç –¥–∞—à–±–æ—Ä–¥–æ–≤ –≤ Grafana**
12. **–í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –¥–æ—Å—Ç—É–ø—É –∫–æ –≤—Å–µ–º —Å–µ—Ä–≤–∏—Å–∞–º**

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
    ```bash
    git clone https://github.com/Traffic-Connect/tc-fast-setup .
    chmod +x script.sh
    ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–∞–≤–∞–º–∏ root:**
    ```bash
    sudo ./script.sh
    ```

3. **–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.**
   - –í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç 10‚Äì30 –º–∏–Ω—É—Ç, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ—â–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–µ—Ç–∏.

4. **–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Å—Å—ã–ª–∫–∏ –∏ –ª–æ–≥–∏–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏.**

---

## üñ•Ô∏è –ü–æ–ª—É—á–∞–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã

- **HestiaCP:** `http://<your_server_ip>:8083`
- **Grafana:** `http://<your_server_ip>:3000`
- **Prometheus:** `http://<your_server_ip>:9090`
- **Loki:** `http://<your_server_ip>:3100`
- **Pushgateway:** `http://<your_server_ip>:9091`

> –ü–∞—Ä–æ–ª—å –æ—Ç HestiaCP (admin) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ:  
> `/usr/local/hestia/data/users/admin/password.conf`  
>  
> –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ Grafana:  
> –õ–æ–≥–∏–Ω: **Trafficadmin**  
> –ü–∞—Ä–æ–ª—å: **admin** (–Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞!)

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–°—Ä–∞–∑—É —Å–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!**
- –î–ª—è –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –ø–æ SSH —á–µ—Ä–µ–∑ firewall –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Fail2Ban.
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã –∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–∏—Å—Ç–µ–º—ã: **Ubuntu 22.04+, Debian 10+** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–µ–∂—É—é LTS –≤–µ—Ä—Å–∏—é)
- –ü—Ä–∞–≤–∞ root (`sudo`)
- –ú–∏–Ω–∏–º—É–º 2 –ì–ë RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4+ –ì–ë)

---

## üì¶ –°–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–≥–æ –ü–û

- HestiaCP
- Grafana
- Prometheus
- Node Exporter
- Pushgateway
- Loki
- Promtail
- Fail2Ban
- iptables, iptables-persistent
- Python3, pip –∏ –ø—Ä–æ–º–µ—Ç–µ–π-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä –¥–ª—è fail2ban

---

## üèÅ –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- –ó–∞–π–¥–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É –≤ –∫–æ–Ω—Å–æ–ª–∏.
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!**
- –î–ª—è HestiaCP –ø–∞—Ä–æ–ª—å –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–∫:
    ```bash
    cat /usr/local/hestia/data/users/admin/password.conf
    ```
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
    ```bash
    apt update && apt upgrade -y
    ```

---

## üìù FAQ

- **–°–∫—Ä–∏–ø—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**  
  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∞ root: `sudo -i` –∏–ª–∏ `sudo ./script.sh`

- **–ü–æ—Ä—Ç—ã –Ω–µ –æ—Ç–∫—Ä—ã—Ç—ã:**  
  –ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã –∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ firewall –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞!

- **–•–æ—á—É –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –¥–∞—à–±–æ—Ä–¥ –∏–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –≤ Grafana:**  
  –í—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Grafana (–ø–æ –∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞:3000).

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

- **TrafficConnect**

---

## ü§ù –õ–∏—Ü–µ–Ω–∑–∏—è

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã!  
–ï—Å–ª–∏ –±—É–¥—É—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ PR –∏–ª–∏ –ø–∏—à–∏—Ç–µ –≤ Issues.

---

**–£–¥–∞—á–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏!**
